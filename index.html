<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opening Chatbot...</title>
    <script>
        function waitForChatbotButton() {
            let attempts = 0;
            let interval = setInterval(() => {
                let chatbotButton = document.querySelector(".vfrc-launcher");
                if (chatbotButton) {
                    console.log("Chatbot button found! Clicking...");
                    chatbotButton.click();
                    clearInterval(interval);
                } else {
                    console.log("Chatbot button not found. Retrying...");
                }
                attempts++;
                if (attempts > 10) {
                    console.log("Chatbot button not found after multiple attempts. Stopping.");
                    clearInterval(interval);
                }
            }, 2000);
        }

        function redirectAndStartChatbot() {
            console.log("Redirecting to Service Transformation website...");
            sessionStorage.setItem("startChatbot", "true"); // Store flag in session
            window.location.replace("https://www.service-transformation.de/de");
        }

        function checkIfChatbotShouldStart() {
            if (sessionStorage.getItem("startChatbot") === "true") {
                console.log("Chatbot should start. Looking for button...");
                sessionStorage.removeItem("startChatbot"); // Prevent repeated execution
                waitForChatbotButton();
            }
        }

        if (document.readyState === "complete" || document.readyState === "interactive") {
            checkIfChatbotShouldStart();
        } else {
            window.onload = checkIfChatbotShouldStart;
        }

        // Redirect to the website after 1 second
        setTimeout(redirectAndStartChatbot, 1000);
    </script>
</head>
<body>
    <p>Redirecting to chatbot...</p>
</body>
</html>
